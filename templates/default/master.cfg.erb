# -*- python -*-
# ex: set syntax=python:

#
# IMPORTANT: This file was automatically generated by Chef.
# Do not edit it by hand.
#

from buildbot.buildslave import BuildSlave
<% @imports.each do |imports| %>
<%= imports.last.join("\n") %>
<% end %>


# This is the dictionary that the buildmaster pays attention to. We also use
# a shorter alias to save typing.
c = BuildmasterConfig = {}

c['title'] = "<%= @title %>"
c['titleURL'] = "<%= @title_url %>"
c['buildbotURL'] = "http://<%= @host %>:8010/"
c['slavePortnum'] = <%= @slave_port %>
c['db'] = { <% @databases.each do |db| %>
    'db_url': "<%= db %>",
<% end %>}

# Change Source
c['change_source'] = <%= @change_source %>

# Slaves
c['slaves'] = [ <% @slaves.each do |slave| %>
    BuildSlave("<%= slave['name'] %>", "<%= slave['password'] %>"),
<% end %>]

# BuilderFactory
factory = BuildFactory()

# Steps
<% @steps.each do |step| %>
factory.addStep(<%= step %>)
<% end %>

# Builders
c['builders'] = [ <% @builders.each do |builder| %>
    <%= builder %>,
<% end %>]

# Schedulers
c['schedulers'] = [ <% @schedulers.each do |scheduler| %>
    <%= scheduler %>,
<% end %>]

# Status
c['status'] = [ <% @statuses.each do |status| %>
    <%= status %>,
<% end %>]

# BuildFactories
<% @factories.each_pair do |factory_path,factory_class| %>
from <%= factory_path %> import <%= factory_class %>
<%= factory_class %>(c)
<% end %>
